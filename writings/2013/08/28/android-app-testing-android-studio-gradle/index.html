<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8" lang="en">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Andrew Hawker">
  <meta name="generator" content="pandoc">
  
  <meta name="dcterms.date" content="2013-08-28 04:43:00 -0700">
  
  

  <link rel="canonical" href="andrew.hawker.io/writings/2013/08/28/android-app-testing-android-studio-gradle/" />

  <title>Android app testing with Android Studio (Gradle) and AppThwack – Andrew Hawker</title>

  <!-- CSS -->
  <link rel="stylesheet" href="/assets/styles/font-awesome.min.css"/>
  <link rel="stylesheet" href="/assets/styles/et-book.min.css">
  <link rel="stylesheet" href="/assets/styles/site.css">
  

  <!--[if lt IE 9]>
  <script src="/assets/js/html5shiv-printshiv.min.js"></script>
  <![endif]-->

  <!-- Icons -->
  <link rel="shortcut icon" href="/assets/images/favicon.jpg"/>
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/images/apple-touch-icon-144-precomposed.png">

  <!-- RSS -->
  <link type="application/atom+xml" rel="alternate" href="andrew.hawker.io/feed.xml" title="Andrew Hawker" />

  <!-- Google Analytics -->
  
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36365256-1', 'auto');
  ga('send', 'pageview');

</script>

  

  <!-- SEO -->
  <!-- Begin Jekyll SEO tag v2.1.0 -->
<title>Android app testing with Android Studio (Gradle) and AppThwack - Andrew Hawker</title>
<meta property="og:title" content="Android app testing with Android Studio (Gradle) and AppThwack" />
<meta name="description" content="Heres a quick tutorial to get started with AppThwack, Android Studio and Gradle. Once you’re up and running you’ll be able to kick off tests on our device lab from the IDE or command line. You can run our built-in compatibility tests or run your own (JUnit/Robotium, Calabash, MonkeyTalk, etc), giving you full control over when, what, and where youre testing your app." />
<meta property="og:description" content="Heres a quick tutorial to get started with AppThwack, Android Studio and Gradle. Once you’re up and running you’ll be able to kick off tests on our device lab from the IDE or command line. You can run our built-in compatibility tests or run your own (JUnit/Robotium, Calabash, MonkeyTalk, etc), giving you full control over when, what, and where youre testing your app." />
<link rel="canonical" href="andrew.hawker.io/writings/2013/08/28/android-app-testing-android-studio-gradle/" />
<meta property="og:url" content="andrew.hawker.io/writings/2013/08/28/android-app-testing-android-studio-gradle/" />
<meta property="og:site_name" content="Andrew Hawker" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2013-08-28T04:43:00-07:00" />
<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "BlogPosting",
"headline": "Android app testing with Android Studio (Gradle) and AppThwack",
"datePublished": "2013-08-28T04:43:00-07:00",
"description": "Heres a quick tutorial to get started with AppThwack, Android Studio and Gradle. Once you’re up and running you’ll be able to kick off tests on our device lab from the IDE or command line. You can run our built-in compatibility tests or run your own (JUnit/Robotium, Calabash, MonkeyTalk, etc), giving you full control over when, what, and where youre testing your app.",
"url": "andrew.hawker.io/writings/2013/08/28/android-app-testing-android-studio-gradle/"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>




<article>
  
<header>
  <h1 class="title"><a name="Android app testing with Android Studio (Gradle) and AppThwack"></a>Android app testing with Android Studio (Gradle) and AppThwack</h1>
  
  
  <p class="byline">August 28, 2013</p>
  
</header>


  <p>Heres a quick tutorial to get started with <a href="http://web.archive.org/web/20140717021901/https://appthwack.com">AppThwack</a>, <a href="https://developer.android.com/studio/index.html">Android Studio</a> and <a href="https://gradle.org/">Gradle</a>. Once you’re up and running you’ll be able to kick off tests on our <a href="http://web.archive.org/web/20140717021901/https://appthwack.com/devicelab">device lab</a> from the IDE or command line. You can run our built-in compatibility tests or run your own (JUnit/Robotium, Calabash, MonkeyTalk, etc), giving you full control over when, what, and where youre testing your app.</p>
<p>Having a problem or interested in contributing? This plugin is open source! Check out the <a href="http://web.archive.org/web/20140717021901/https://github.com/appthwack/gradle-plugin">Github</a> page for more details.</p>
<section id="configure-gradle" class="level2">
<h2>Configure Gradle</h2>
<p><span><label for="sn-1" class="margin-toggle">&#8853;</label><input type="checkbox" id="sn-1" class="margin-toggle"/><span class="marginnote"> <img src="/assets/images/posts/gradle-appthwack-project-layout.png" alt="Project Layout" /><br />
<br />
</span></span> To add AppThwack support to an existing Android Studio project, we must modify the project specific build.gradle file. Be sure to select your app specific build.gradle file as the top-level file is for configuration options across all projects.</p>
<section id="apply-the-plugin" class="level3">
<h3>Apply the plugin</h3>
<p>Adding any custom plugin to Gradle is a simple call to <em>apply</em> plugin.</p>
<pre><code>apply plugin: &#39;appthwack&#39;</code></pre>
</section>
<section id="add-plugin-dependencies" class="level3">
<h3>Add plugin dependencies</h3>
<p>Add the AppThwack plugin+dependencies to the classpath so it can be built.</p>
<pre><code>dependencies {
    //...
    classpath &#39;com.sun.jersey:jersey-core:1.8&#39;

    // Version needs to match current version of the plugin (See the github readme for current version)
    classpath &#39;com.appthwack:gradle:1.3&#39;
}</code></pre>
</section>
<section id="appthwack-settings" class="level3">
<h3>AppThwack settings</h3>
<p>All AppThwack specific configuration happens within the appthwack closure of your build.gradle file. The first step is adding your account <a href="http://web.archive.org/web/20140717021901/https://appthwack.com/user/profile">API Key</a>, the target project to use and a pool of devices to test on.</p>
<p><span><label for="sn-2" class="margin-toggle">&#8853;</label><input type="checkbox" id="sn-2" class="margin-toggle"/><span class="marginnote"> Visit <a href="https://appthwack.com/user/profile">https://appthwack.com/user/profile</a> for your API Key.<br />
<br />
</span></span></p>
<pre><code>appthwack {
    apiKey=&#39;...&#39;
    project=&#39;My Android App Project&#39;
    devicePool=&#39;Top 10 devices&#39;
    // ...
}</code></pre>
<p>With the account and project configured, now its time to configure the tests. Within the same appthwack closure, we can configure JUnit/Robotium, Calabash or AppExplorer test runs.</p>
</section>
<section id="junitrobotium-tests" class="level3">
<h3>JUnit/Robotium Tests</h3>
<p>Selecting a JUnit run will automatically use the test APK which is built with your application.</p>
<p><span><label for="sn-3" class="margin-toggle">&#8853;</label><input type="checkbox" id="sn-3" class="margin-toggle"/><span class="marginnote"> The ‘testFilter’ parameter is optional and should be omitted if you wish to run the entire JUnit test suite built with your app.<br />
<br />
</span></span></p>
<pre><code>appthwack {
    // ...
    junit (
        &#39;com.appthwack.MyApp.tests#TestFoo&#39; // testFilter
    )
}</code></pre>
</section>
<section id="calabash-tests" class="level3">
<h3>Calabash Tests</h3>
<p>Selecting a Calabash run will test your newly built application with the selected features.</p>
<p><span><label for="sn-4" class="margin-toggle">&#8853;</label><input type="checkbox" id="sn-4" class="margin-toggle"/><span class="marginnote"> The ‘path’ parameter is required and should point to a local copy of your Calabash features zip.<br />
<br />
</span></span> <span><label for="sn-5" class="margin-toggle">&#8853;</label><input type="checkbox" id="sn-5" class="margin-toggle"/><span class="marginnote"> The ‘tags’ parameter is optional and represents a set of Cucumber based tags to pass to Calabash and should be omitted if you wish to run the entire test suite.<br />
<br />
</span></span></p>
<pre><code>appthwack {
    // ...
    calabash (
        &#39;/src/app/tests/calabash/features.zip&#39;, // path
        &#39;@uitest&#39; // tags
    )
}</code></pre>
</section>
<section id="appexplorer-tests" class="level3">
<h3>AppExplorer Tests</h3>
<p>Selecting an AppExplorer run will test your newly built application with the AppThwack AppExplorer and Exerciser Monkey.</p>
<p><span><label for="sn-6" class="margin-toggle">&#8853;</label><input type="checkbox" id="sn-6" class="margin-toggle"/><span class="marginnote"> The ‘username’ parameter is optional and should contain a string value to inject into signin forms.<br />
<br />
</span></span> <span><label for="sn-7" class="margin-toggle">&#8853;</label><input type="checkbox" id="sn-7" class="margin-toggle"/><span class="marginnote"> The ‘username’ parameter is optional and should contain a string value to inject into signin forms.<br />
<br />
</span></span> <span><label for="sn-8" class="margin-toggle">&#8853;</label><input type="checkbox" id="sn-8" class="margin-toggle"/><span class="marginnote"> The ‘launchdata’ parameter is optional and should contain URI to pass to the launch activity.<br />
<br />
</span></span> <span><label for="sn-9" class="margin-toggle">&#8853;</label><input type="checkbox" id="sn-9" class="margin-toggle"/><span class="marginnote"> The ‘eventcount’ parameter is optional and should be the number of events the exerciser monkey should run.<br />
<br />
</span></span> <span><label for="sn-10" class="margin-toggle">&#8853;</label><input type="checkbox" id="sn-10" class="margin-toggle"/><span class="marginnote"> The ‘monkeyseed’ parameter is optional and is the seed value for the exerciser monkey randomized. Using the same value across runs should yield the same set of events.<br />
<br />
</span></span></p>
<pre><code>appthwack {
    //...
    appexplorer (
        &#39;test_account&#39;, // username
        &#39;testpassword123&#39;, // password
        &#39;...&#39;, // launchdata
        1000, // eventcount
        0 // monkeyseed
    )
}</code></pre>
<p>Thats it! Now that our build.gradle is complete, lets setup a quick task in Android Studio to upload and run our tests.</p>
</section>
</section>
<section id="configure-android-studio" class="level2">
<h2>Configure Android Studio</h2>
<p>We’ll need to add a new <em>Run Configuration</em> in Android Studio so we can quickly start our test runs.</p>
<section id="add-a-new-run-configuration" class="level3">
<h3>Add a new Run Configuration</h3>
<p><span><label for="sn-11" class="margin-toggle">&#8853;</label><input type="checkbox" id="sn-11" class="margin-toggle"/><span class="marginnote"> <img src="/assets/images/posts/gradle-appthwack-task.png" alt="Add Configuration" /><br />
<br />
</span></span> Select <strong>Run &gt; Edit Configurations</strong> from the Android Studio menu bar.</p>
<p>In the Run/Debug Configurations dialog, click the Add New Configuration in the top left-hand corner and add a new Gradle configuration. <img src="/assets/images/posts/gradle-appthwack-task-config.png" alt="Task Configuration" /></p>
<p>Add the <strong>appthwackUpload</strong> task to your new Run Configuration.</p>
<p>Thats it for Android Studio! Now its time to run our tests.</p>
</section>
</section>
<section id="running-tests" class="level2">
<h2>Running Tests</h2>
<p>Now that our configuration is complete, we can kick off AppThwack test runs from Android Studio or directly through Gradle.</p>
<section id="android-studio" class="level3">
<h3>Android Studio</h3>
<p><span><label for="sn-12" class="margin-toggle">&#8853;</label><input type="checkbox" id="sn-12" class="margin-toggle"/><span class="marginnote"> <img src="/assets/images/posts/gradle-appthwack-run-configuration.png" alt="Run Configuration" /><br />
<br />
</span></span> Select our <strong>Run Tests on AppThwack</strong> configuration from the drop down on the menu bar and hit play!</p>
</section>
<section id="gradle" class="level3">
<h3>Gradle</h3>
<p>All Android Studio projects are packaged with the GradleWrapper, which gives us Gradle command line access from any platform.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1"></a>$ <span class="bu">cd</span> /src/MyApp</span>
<span id="cb7-2"><a href="#cb7-2"></a>$ <span class="ex">./gradlew</span> appthwackUpload</span></code></pre></div>
</section>
<section id="results" class="level3">
<h3>Results</h3>
<p>On a successful run from Android Studio or Gradle, your output will look something like this.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1"></a><span class="ex">...</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>:<span class="ex">GradleTestApp</span>:appthwackUpload</span>
<span id="cb8-3"><a href="#cb8-3"></a>[<span class="ex">AppThwack</span>] Using Project <span class="st">&#39;demoproject&#39;</span>.</span>
<span id="cb8-4"><a href="#cb8-4"></a>[<span class="ex">AppThwack</span>] Using DevicePool <span class="st">&#39;Top 10 devices&#39;</span>.</span>
<span id="cb8-5"><a href="#cb8-5"></a>[<span class="ex">AppThwack</span>] Uploading apk <span class="st">&#39;GradleTestApp-debug-unaligned.apk&#39;</span>.</span>
<span id="cb8-6"><a href="#cb8-6"></a>[<span class="ex">AppThwack</span>] Uploading test apk <span class="st">&#39;GradleTestApp-test-unaligned.apk&#39;</span>.</span>
<span id="cb8-7"><a href="#cb8-7"></a>[<span class="ex">AppThwack</span>] Scheduling <span class="st">&#39;junit&#39;</span> run <span class="st">&#39;GradleTestApp-debug-unaligned.apk (Gradle)&#39;</span>.</span>
<span id="cb8-8"><a href="#cb8-8"></a>[<span class="ex">AppThwack</span>] Congrats! See your test results at https://appthwack.com/project/demoproject/run/24219.</span></code></pre></div>
<p>Now you can kick off AppThwack test runs from your shell or IDE. <span><label for="sn-13" class="margin-toggle">&#8853;</label><input type="checkbox" id="sn-13" class="margin-toggle"/><span class="marginnote"> This post was migrated from the <a href="https://blog.appthwack.com">AppThwack Blog</a> which is no longer available. A copy of the original post can be viewed from <a href="http://web.archive.org/web/20140717021901/http://blog.appthwack.com/android-app-testing-android-studio-gradle/">archive.org</a>.<br />
<br />
</span></span></p>
</section>
</section>



<section>
  <p class="return-home"><em><a href="/">Return home</a></em></p>
</section>


</article>






<footer>
    <hr class="footer-hr">
    <ul class="social-links">
      
        <li><a href="https://www.routegy.com" target="_blank" title="Employer"><span class="fa fa-2x fa-building social-icon"></span></a></li>
      
        <li><a href="https://goo.gl/maps/kUBP3GgPGiG2" target="_blank" title="Location"><span class="fa fa-2x fa-map-marker social-icon"></span></a></li>
      
        <li><a href="https://stackoverflow.com/users/84942/ahawker" target="_blank" title="Stack Overflow"><span class="fa fa-2x fa-stack-overflow social-icon"></span></a></li>
      
        <li><a href="https://github.com/ahawker" target="_blank" title="GitHub"><span class="fa fa-2x fa-github-alt social-icon"></span></a></li>
      
        <li><a href="https://linkedin.com/in/ahawker" target="_blank" title="LinkedIn"><span class="fa fa-2x fa-linkedin-square social-icon"></span></a></li>
      
        <li><a href="https://twitter.com/rekwah" target="_blank" title="Twitter"><span class="fa fa-2x fa-twitter social-icon"></span></a></li>
      
        <li><a href="mailto:andrew.r.hawker@gmail.com" target="_blank" title="Email"><span class="fa fa-2x fa-envelope social-icon"></span></a></li>
      
        <li><a href="/feed.xml" target="_blank" title="RSS"><span class="fa fa-2x fa-rss social-icon"></span></a></li>
        
    </ul>
  <div class="credits">
    <span>&copy; 2019 &nbsp;&nbsp;ANDREW HAWKER</span></br> <br>
    <span>Code for this website can be found <a href="https://github.com/ahawker/personal-site">here</a>.</span>
  </div>  
</footer>

</body>
</html>

